<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    function topK(k,arr){
        let heapArr=arr.slice(0,k)
        buildMinHeap(heapArr)

        for(let i=k;i<arr.length;i++){
            if(arr[i]>heapArr[0]){
                heapArr[0]=arr[i]
                heapify(heapArr,0,k)
            }
        }
        return heapArr
    }
    
    function buildMinHeap(arr){
        const n=arr.length
        for(let i=Math.floor(n/2)-1;i>=0;i--){
            heapify(arr,i,n)
        }
    }

    function heapify(arr,index,heapSize){
        let smallest=index
        let left=2*index+1
        let right=2*index+2

        if(left<heapSize && arr[left]<arr[smallest]){
            smallest=left
        }
        if(right<heapSize && arr[right]<arr[smallest]){
            smallest=right
        }

        if(smallest!==index){
            swap(arr,smallest,index)
            heapify(arr,smallest,heapSize)
        }
    }

    function swap(arr,i,j){
        const temp=arr[i]
        arr[i]=arr[j]
        arr[j]=temp
    }

    const arr = [11, 1, 4, 7, 9, 3, 2, 8, 10, 44, 300, 67]

    console.log(topK(4, arr))

</script>
</html>